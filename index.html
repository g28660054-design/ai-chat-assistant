<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>PLAZMA OS :: DEEPSEEK</title>
    <style>
        /* –í–µ—Å—å —Ç–≤–æ–π –ª–∞–≤–æ–≤—ã–π —Å—Ç–∏–ª—å –æ—Å—Ç–∞–µ—Ç—Å—è —Ç—É—Ç */
        :root { --dark: #050505; --lava: linear-gradient(135deg, #ff4e00, #ff8c00, #ff0000); --orange: #ff5f00; --glow: 0 0 20px rgba(255, 95, 0, 0.4); }
        body { background: var(--dark); margin: 0; color: white; font-family: 'Segoe UI', sans-serif; height: 100vh; display: flex; flex-direction: column; }
        .top-bar { display: flex; justify-content: space-between; align-items: center; padding: 15px 20px; background: #0f0f0f; border-bottom: 2px solid var(--orange); box-shadow: var(--glow); }
        .logo { font-weight: 900; letter-spacing: 3px; color: var(--orange); text-shadow: var(--glow); }
        .chat-container { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 20px; background: radial-gradient(circle, #150a00 0%, #050505 100%); }
        .msg-block { display: flex; flex-direction: column; max-width: 85%; transition: 0.5s; }
        .user { align-self: flex-end; } .bot { align-self: flex-start; }
        .bubble { padding: 12px 18px; border-radius: 15px; font-size: 16px; line-height: 1.5; box-shadow: 0 4px 15px rgba(0,0,0,0.5); border: 1px solid #333; }
        .user .bubble { background: #222; border-color: #444; }
        .bot .bubble { background: rgba(20, 10, 0, 0.9); border-color: var(--orange); background: var(--lava); -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-weight: 600; }
        .avatar { width: 35px; height: 35px; border-radius: 50%; background: var(--lava); border: 2px solid var(--orange); box-shadow: var(--glow); margin-top: 8px; }
        .thinking .avatar { animation: burn 0.8s infinite alternate; }
        @keyframes burn { from { transform: scale(1); } to { transform: scale(1.3); filter: brightness(1.5); } }
        .input-wrapper { padding: 20px; background: #0f0f0f; border-top: 1px solid #222; }
        .input-box { display: flex; gap: 10px; background: #1a1a1a; border-radius: 30px; padding: 5px 15px; border: 1px solid var(--orange); }
        input { flex: 1; background: none; border: none; color: white; height: 45px; outline: none; }
        .btn-send { background: none; border: none; color: var(--orange); font-size: 22px; cursor: pointer; }
        pre { background: #000; padding: 10px; border-radius: 5px; color: #ff8c00; overflow-x: auto; border: 1px solid var(--orange); }
    </style>
</head>
<body>

<div class="top-bar">
    <div class="logo">PLAZMA :: DEEPSEEK</div>
    <div style="color: var(--orange); font-size: 12px;">SYSTEM ACTIVE</div>
</div>

<div class="chat-container" id="chat"></div>

<div class="input-wrapper">
    <div class="input-box">
        <input type="text" id="userInput" placeholder="–ü—Ä–∏–∫–∞–∑ –¥–ª—è PLAZMA (DeepSeek)...">
        <button id="sendBtn" class="btn-send">üöÄ</button>
    </div>
</div>

<script>
    const chatEl = document.getElementById('chat');
    const inputEl = document.getElementById('userInput');
    const sendBtn = document.getElementById('sendBtn');

    // –í–°–¢–ê–í–¨ –°–Æ–î–ê –°–í–û–ô –ö–õ–Æ–ß –û–¢ DEEPSEEK
    const DEEPSEEK_KEY = 'sk-8ddcacb7f1624754872d4ec69aa8a518'; 

    let history = [
        { role: "system", content: "–¢—ã Plazma ‚Äî –º–æ—â–Ω—ã–π –ò–ò –≤ –ª–∞–≤–æ–≤–æ–º —Å—Ç–∏–ª–µ. –û—Ç–≤–µ—á–∞–π —É–≤–µ—Ä–µ–Ω–Ω–æ –∏ –∫—Ä—É—Ç–æ." }
    ];

    async function sendMessage() {
        const text = inputEl.value.trim();
        if (!text) return;

        addMessage(text, 'user');
        inputEl.value = '';
        
        const thinkingId = addThinking();
        history.push({ role: "user", content: text });

        try {
            const response = await fetch('https://api.deepseek.com/chat/completions', {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                    "Authorization": `Bearer ${DEEPSEEK_KEY}`
                },
                body: JSON.stringify({
                    model: "deepseek-chat",
                    messages: history,
                    stream: false
                })
            });

            const data = await response.json();
            const botText = data.choices[0].message.content;

            document.getElementById(thinkingId).remove();
            addMessage(botText, 'bot');
            history.push({ role: "assistant", content: botText });

        } catch (e) {
            if (document.getElementById(thinkingId)) document.getElementById(thinkingId).remove();
            addMessage("–°–ë–û–ô –°–ï–†–í–ï–†–ê DEEPSEEK. –ü–†–û–í–ï–†–¨ –ë–ê–õ–ê–ù–° –ò–õ–ò –ö–õ–Æ–ß.", 'bot');
            console.error(e);
        }
    }

    function addMessage(text, side) {
        const block = document.createElement('div');
        block.className = `msg-block ${side}`;
        let content = text.replace(/```([\s\S]*?)```/g, '<pre><code>$1</code></pre>');
        block.innerHTML = `<div class="bubble">${content}</div>${side === 'bot' ? '<div class="avatar"></div>' : ''}`;
        chatEl.appendChild(block);
        chatEl.scrollTop = chatEl.scrollHeight;
    }

    function addThinking() {
        const id = 't-' + Date.now();
        const block = document.createElement('div');
        block.id = id; block.className = 'msg-block bot thinking';
        block.innerHTML = '<div class="bubble">–°–ò–ù–¢–ï–ó–ò–†–£–Æ –ü–û–¢–û–ö...</div><div class="avatar"></div>';
        chatEl.appendChild(block);
        chatEl.scrollTop = chatEl.scrollHeight;
        return id;
    }

    sendBtn.onclick = sendMessage;
    inputEl.onkeypress = (e) => e.key === 'Enter' && sendMessage();
    window.onload = () => addMessage("–Ø–î–†–û DEEPSEEK –ò–ù–¢–ï–ì–†–ò–†–û–í–ê–ù–û. PLAZMA –°–õ–£–®–ê–ï–¢.", "bot");
</script>

</body>
</html>
